# ğŸ“š ì„œê°€ì´ìŒ(Seogaeum) API ëª…ì„¸ì„œ (v1.5) â€” (2025-12-25)

**Status:** âœ… **Project Complete â€” Production-ready**

## ğŸŒ Base URL
`http://127.0.0.1:8000/api/v1` (local / development)

---

### ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ (v1.5)
- í”„ë¡œì íŠ¸ ì™„ì„±: AI ê¸°ë°˜ ë§ì¶¤ ì¶”ì²œ, ì‹¤ì‹œê°„ ë„ì„œê´€ ì—°ë™, ì»¤ë®¤ë‹ˆí‹° ì±„íŒ…, ì¸ì¦ ë° í”„ë¡œí•„ ìë™ ê°±ì‹  ë“± í•µì‹¬ ê¸°ëŠ¥ ì™„ë£Œ.
- ì‘ë‹µ í¬ë§· ì•ˆì •í™” ë° ë§ˆì´ë„ˆ ë²„ê·¸ í”½ìŠ¤ ì ìš©.
- API ë¬¸ì„œì™€ ì˜ˆì‹œë¥¼ ì •ë¦¬í•˜ì—¬ ê°œë°œìì™€ ìš´ì˜ììš© ê°€ì´ë“œ ë³´ì™„.

## [1] ë„ì„œ ì„œë¹„ìŠ¤ (Books)
**Base URL:** `/books/`

### 1. ë„ì„œ ëª©ë¡ ë° ê²€ìƒ‰ (F01)
* **Endpoint:** `/`
* **Method:** `GET` 
* **Query Params:**
    * `q`: ê²€ìƒ‰ì–´ (ì œëª©/ì €ì)
    * `sort`: `popular` (ëŒ€ì¶œìˆœ), `latest` (ìµœì‹ ìˆœ)
    * `category`: ì¹´í…Œê³ ë¦¬ ID (ìˆ«ì)
* **Response Example:**
    ```json
    [
      { "isbn": "9788937473135", "title": "ì‘ë³„í•˜ì§€ ì•ŠëŠ”ë‹¤", "author": "í•œê°•", "cover_url": "...", "loan_count": 120 }
    ]
    ```

### 2. ë„ì„œ ìƒì„¸ ì •ë³´ ì¡°íšŒ (F05) - âœ¨ Update
* **Endpoint:** `/{isbn}/`
* **Method:** `GET` 
* **Description:** ë„ì„œ ì •ë³´ì™€ ìœ ì € ìƒíƒœ(ì°œ/ì†Œì¥), ê·¸ë¦¬ê³  **ì‹¤ì‹œê°„ ì£¼ë³€/ê´€ì‹¬ ë„ì„œê´€ ì†Œì¥/ëŒ€ì¶œ í˜„í™©**ì„ í†µí•©í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.
* **Response Example:**
    ```json
    {
        "id": 465,
        "title": "ë‚´ ì‹¬ì¥ì„ ì´ë¼",
        "is_wish": true, 
        "is_owned": false,
        "library_status": [
            {
                "libCode": "127521",
                "libName": "ë‹¬ì„œêµ¬ë¦½ë„ì›ë„ì„œê´€",
                "hasBook": "Y",
                "loanAvailable": "Y",
                "distance": 1.25,
                "address": "...",
                "homepage": "..."
            }
        ]
    }
    ```

### 3. ë„ì„œ ì•¡ì…˜: ì°œí•˜ê¸° / ì†Œì¥í•˜ê¸° (F06)
* **Endpoint:** `/{isbn}/action/{action}/`
* **Method:** `POST` 
* **Auth:** **Token í•„ìš”**
* **Path Variable:** `action`ì— `wish` ë˜ëŠ” `owned` ì…ë ¥ (Toggle ë°©ì‹)

### 4. AI ë§ì¶¤ ë„ì„œ ì¶”ì²œ (F04) - âœ¨ Update
* **Endpoint:** `/recommendations/`
* **Method:** `GET` 
* **Auth:** **Token í•„ìš”**
* **Description:** ìœ ì € ì·¨í–¥(ë‹¤ì¤‘ ì¥ë¥´) ë° í†µê³„ ê¸°ë°˜ ì¶”ì²œ 5ê±´ì„ ë°˜í™˜í•©ë‹ˆë‹¤. **ê°ì„±ì ì¸ ì¶”ì²œ ë¬¸êµ¬(reason)**ê°€ í¬í•¨ë©ë‹ˆë‹¤.
* **Response Example:**
    ```json
    {
        "id": 19,
        "book": {
            "id": 76,
            "title": "ì´, ê· , ì‡ ",
            "author": "ì¬ë ˆë“œ ë‹¤ì´ì•„ëª¬ë“œ",
            "cover_url": "http://image.aladin.co.kr/product/61/50/cover/8970127240_2.jpg",
            "category": 5,
            "category_name": "ì‚¬íšŒê³¼í•™",
            "loan_count": 0
        },
        "reason": "ë¬¸ëª…ì˜ ë¹„ë°€ì„ íŒŒí—¤ì¹œë‹¤!",
        "created_at": "2025-12-22T15:23:19.973621+09:00"
    },
    ```

---

## [2] ì‚¬ìš©ì ì„œë¹„ìŠ¤ (Users)
**Base URL:** `/users/`

### 1. íšŒì›ê°€ì… (F02)
* **Endpoint:** `/register/`
* **Method:** `POST`
* **Body (JSON):**
    ```json
    {
        "email": "user@example.com",
        "password": "password123",
        "password_confirm": "password123",
        "nickname": "ì„œê°€ì´ìŒ",
        "favorite_libraries": "ë‹¬ì„œêµ¬ë¦½ë„ì›ë„ì„œê´€,ê°•ë‚¨ë„ì„œê´€",
        "age_group": "20s",
        "gender": "M",
        "preferred_genres": "ì†Œì„¤,ì¸ë¬¸",
        "latitude": 35.8034,
        "longitude": 128.5211
    }
    ```
* **Note:** 
    * ê°€ì… ì„±ê³µ ì‹œ ìë™ ë¡œê·¸ì¸ ì²˜ë¦¬ë˜ì–´ `tokens`(access, refresh)ê°€ ë°˜í™˜ë©ë‹ˆë‹¤.
    * Note: ìµœì´ˆ ì‹¤í–‰ ì‹œ ì‚¬ìš©ìê°€ Geolocation APIì— ë”°ë¥¸ ìœ„ì¹˜ í™•ì¸ ê¶Œí•œ í—ˆìš© ì‹œ ì‹¤ì‹œê°„ ìœ„ì¹˜ ê¸°ë°˜ ë„ì„œê´€ì´ ì¡°íšŒë©ë‹ˆë‹¤. (ê¸°ë³¸ ì¢Œí‘œ ë©€í‹°ìº í¼ìŠ¤ ì—­ì‚¼)

### 2. ë¡œê·¸ì¸ (F03)
* **Endpoint:** `/login/`
* **Method:** `POST`
* **Success Response:** `user` ì •ë³´ ë° `tokens` (access, refresh)

### 3. ë¡œê·¸ì•„ì›ƒ
* **Endpoint:** `/logout/`
* **Method:** `POST`
* **Body:** `{"refresh": "REFRESH_TOKEN_STRING"}`
* **Note:** ì‚¬ìš©í•œ Refresh í† í°ì„ ë¸”ë™ë¦¬ìŠ¤íŠ¸ì— ë“±ë¡í•˜ì—¬ ë¬´íš¨í™”í•©ë‹ˆë‹¤.

### 4. í”„ë¡œí•„ ê´€ë¦¬ (F04) - âœ¨ Update
* **ì¡°íšŒ:** `GET` `/profile/` (ì¸ì¦ í•„ìš”)
* **ìˆ˜ì •:** `PATCH` `/profile/update/` (ì¸ì¦ í•„ìš”)
    * **Note:** ë‹‰ë„¤ì„, ë‚˜ì´ëŒ€, ì¥ë¥´ ë“± ìˆ˜ì • ì‹œ **AI ì¶”ì²œ ë°ì´í„°ê°€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìë™ìœ¼ë¡œ ê°±ì‹ **ë©ë‹ˆë‹¤.

---

## [3] ë…ì„œ ì»¤ë®¤ë‹ˆí‹° (Community)
**Base URL:** `/community/`

### 1. ì±„íŒ… ë©”ì‹œì§€ ì¡°íšŒ ë° ì‘ì„±
* **Endpoint:** `/{isbn}/messages/`
* **Method:** `GET` (ëª©ë¡ ì¡°íšŒ) / `POST` (ì‘ì„±)
* **ì¸ì¦(Auth):** 
    * **ì¡°íšŒ:** ëˆ„êµ¬ë‚˜ ê°€ëŠ¥ (Public)
    * **ì‘ì„±:** ë¡œê·¸ì¸ ìœ ì €ë§Œ ê°€ëŠ¥ (Token í•„ìš”)
* **Request Body (ì‘ì„± ì‹œ):**
    ```json
    { "content": "ì´ ì±…ì˜ ë¬¸ì²´ê°€ ì •ë§ ë§¤ë ¥ì ì´ë„¤ìš”!" }
    ```
* **Success Response (ì¡°íšŒ ì‹œ):**
    ```json
    [
        {
            "id": 1,
            "user_id": 5,
            "nickname": "ì±…ë²Œë ˆ",
            "content": "ì •ë§ ì¶”ì²œí•©ë‹ˆë‹¤!",
            "created_at": "2025-12-23T16:08:21.863455", 
        }
    ]
    ```

---

## ğŸ’¡ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ê°€ì´ë“œ (v1.3 ì—…ë°ì´íŠ¸)
1. **ì¸ì¦ í—¤ë”:** ê¶Œí•œì´ í•„ìš”í•œ API í˜¸ì¶œ ì‹œ í—¤ë”ì— `Authorization: Bearer <Access_Token>`ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
2. **ìë™ ë¡œê·¸ì¸:** íšŒì›ê°€ì… ì„±ê³µ ì‹œì—ë„ í† í°ì´ ë°œê¸‰ë˜ë¯€ë¡œ ë°”ë¡œ ë©”ì¸ í˜ì´ì§€ ì§„ì…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
3. **ë°ì´í„° í¬ë§·:** `favorite_libraries`ì™€ `preferred_genres`ëŠ” ì‰¼í‘œ(`,`)ë¡œ êµ¬ë¶„ëœ ë¬¸ìì—´ë¡œ í†µì‹ í•©ë‹ˆë‹¤.
4. **ì—ëŸ¬ ì½”ë“œ:** 
    * `401 Unauthorized`: í† í° ë§Œë£Œ ë˜ëŠ” ì¸ì¦ ì‹¤íŒ¨
    * `404 Not Found`: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ISBNìœ¼ë¡œ ìš”ì²­ ì‹œ
    * `400 Bad Request`: í•„ìˆ˜ í•„ë“œ ëˆ„ë½ ë˜ëŠ” ìœ íš¨í•˜ì§€ ì•Šì€ ë°ì´í„°(ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜ ë“±)
5. **ê´€ì‹¬ ë„ì„œê´€(favorite_libraries)**: ë„ì„œ ìƒì„¸í˜ì´ì§€ì˜ library_statusì—ì„œ ìœ ì €ê°€ ë“±ë¡í•œ ë„ì„œê´€ ì´ë¦„ì´ ìµœìƒë‹¨ì— ìš°ì„  ë°°ì¹˜ë©ë‹ˆë‹¤.
6. **ë‹¤ì¤‘ ì¹´í…Œê³ ë¦¬**: preferred_genresì— ì—¬ëŸ¬ ê°œë¥¼ ë³´ë‚¼ ê²½ìš°(ì˜ˆ: "ê³¼í•™, ì†Œì„¤"), AIê°€ ë‘ ë¶„ì•¼ë¥¼ ê³¨ê³ ë£¨ ì„ì–´ì„œ ì¶”ì²œ í›„ë³´ë¥¼ ì„ ì •í•©ë‹ˆë‹¤.
7. **ì¶”ì²œ ë¬¸êµ¬ í™œìš©**: í™ˆ í™”ë©´ì˜ AI ì¶”ì²œ ì„¹ì…˜ì—ì„œëŠ” reason í•„ë“œë¥¼ í™œìš©í•´ ëŠë‚Œí‘œë¡œ ëë‚˜ëŠ” ê°•ë ¬í•œ ë¬¸êµ¬ë¥¼ ë…¸ì¶œí•´ ì£¼ì„¸ìš”.
8. **ìœ„ì¹˜ ì •ë³´**: ìœ„ë„(latitude)ì™€ ê²½ë„(longitude) ê°’ì´ ì •í™•í• ìˆ˜ë¡ ì‹¤ì‹œê°„ ëŒ€ì¶œ í˜„í™©ì˜ distance ê°’ì´ ì •í™•í•˜ê²Œ ê³„ì‚°ë©ë‹ˆë‹¤. (Geolocation API)

---

## ğŸ” ì¸ì¦ ì˜ˆì‹œ (Auth & Test)
### ë¡œê·¸ì¸ (í† í° ë°œê¸‰)
* **Endpoint:** `POST /users/login/`
* **Body:**
```json
{ "email": "user@example.com", "password": "password123" }
```
* **ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "user": {"id": 1, "email": "user@example.com", "nickname": "ì„œê°€ì´ìŒ"},
  "tokens": {"access": "<ACCESS_TOKEN>", "refresh": "<REFRESH_TOKEN>"}
}
```

### ì¸ì¦ í—¤ë” ì‚¬ìš© ì˜ˆì‹œ
```
Authorization: Bearer <ACCESS_TOKEN>
```

### curlë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸° (ì˜ˆì‹œ)
- ë¡œê·¸ì¸:
```bash
curl -X POST "http://127.0.0.1:8000/api/v1/users/login/" \
  -H "Content-Type: application/json" \
  -d '{"email":"user@example.com","password":"password123"}'
```
- ì¸ì¦ì´ í•„ìš”í•œ ìš”ì²­ (ì˜ˆì‹œ):
```bash
curl -H "Authorization: Bearer <ACCESS_TOKEN>" "http://127.0.0.1:8000/api/v1/books/"
```

---

## ğŸ“ ë³€ê²½ ë¡œê·¸ (ê°„ëµ)
- v1.0 ~ v1.4: ê¸°ëŠ¥ ì„¤ê³„ ë° í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„(ì¶”ì²œ, ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ë™, ì»¤ë®¤ë‹ˆí‹°)
- v1.5 (2025-12-25): í”„ë¡œì íŠ¸ ì™„ë£Œ

---

## ğŸ“¬ ë¬¸ì˜ / ê¸°ì—¬
- ì½”ë“œ ì´ìŠˆ/í’€ ë¦¬í€˜ìŠ¤íŠ¸ëŠ” GitHub ì €ì¥ì†Œë¡œ ë¶€íƒë“œë¦½ë‹ˆë‹¤. (LICENSE ì°¸ê³ )
- ê¸´ê¸‰í•œ ë²„ê·¸/ìš´ì˜ ì´ìŠˆëŠ” ë ˆí¬ ì´ìŠˆ íŠ¸ë˜ì»¤ì— íƒœê·¸ë¥¼ ë‹¬ì•„ ì£¼ì„¸ìš”.